<h1 id="docker-commands">Docker commands<a aria-hidden="true" class="anchor-heading icon-link" href="#docker-commands"></a></h1>
<h2 id="installation">Installation<a aria-hidden="true" class="anchor-heading icon-link" href="#installation"></a></h2>
<p>One click installation script:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> -fsSL https://get.docker.com -o get-docker.sh
<span class="token function">sudo</span> <span class="token function">sh</span> get-docker.sh
</code></pre>
<p>Run docker as non root user:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">groupadd</span> <span class="token function">docker</span>
<span class="token function">sudo</span> <span class="token function">usermod</span> -aG <span class="token function">docker</span> <span class="token environment constant">$USER</span>
</code></pre>
<p>Install Docker Engine : <a href="https://docs.docker.com/engine/install/">Docker Engine</a></p>
<hr>
<h2 id="build-images">Build Images<a aria-hidden="true" class="anchor-heading icon-link" href="#build-images"></a></h2>
<hr>
<h2 id="docker-cli">Docker CLI<a aria-hidden="true" class="anchor-heading icon-link" href="#docker-cli"></a></h2>
<p><strong>Run Containers</strong></p>
<div class="table-responsive">
























<table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>docker run IMAGE</code></td><td>Start a new container</td></tr><tr><td><code>docker run --name CONTAINER IMAGE</code></td><td>Start a new container and set a name</td></tr><tr><td><code>docker run -p HOSTPORT:CONTAINERPORT IMAGE</code></td><td>Start a new container with mapped ports</td></tr><tr><td><code>docker run -P IMAGE</code></td><td>Start a new container and map all ports</td></tr></tbody></table></div>
<p><strong>Container Management:</strong></p>
<div class="table-responsive">








































<table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>docker create IMAGE</code></td><td>Create a new container</td></tr><tr><td><code>docker start CONTAINER</code></td><td>Start a container</td></tr><tr><td><code>docker stop CONTAINER</code></td><td>Graceful stop a container</td></tr><tr><td><code>docker kill CONTAINER</code></td><td>Kill (SIGKILL) a container</td></tr><tr><td><code>docker restart CONTAINER</code></td><td>Graceful stop and restart a container</td></tr><tr><td><code>docker pause CONTAINER</code></td><td>Suspend a container</td></tr><tr><td><code>docker unpause CONTAINER</code></td><td>Resume a container</td></tr><tr><td><code>docker rm CONTAINER</code></td><td>Destroy a container</td></tr></tbody></table></div>
<p><strong>Container Bulk Management</strong></p>
<div class="table-responsive">












































































<table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>docker stop $(docker ps -q)</code></td><td>To stop all the running containers</td></tr><tr><td><code>docker stop $(docker ps -a -q)</code></td><td>To stop all the stopped and running containers</td></tr><tr><td><code>docker kill $(docker ps -q)</code></td><td>To kill all the running containers</td></tr><tr><td><code>docker kill $(docker ps -a -q)</code></td><td>To kill all the stopped and running containers</td></tr><tr><td><code>docker restart $(docker ps  -q)</code></td><td>To restart all  running containers</td></tr><tr><td><code>docker restart $(docker ps -a -q)</code></td><td>To restart all the stopped and running containers</td></tr><tr><td><code>docker rm $(docker ps  -q)</code></td><td>To destroy all running containers</td></tr><tr><td><code>docker rm $(docker ps -a -q)</code></td><td>To destroy all the stopped and running containers</td></tr><tr><td><code>docker pause $(docker ps  -q)</code></td><td>To pause all  running containers</td></tr><tr><td><code>docker pause $(docker ps -a -q)</code></td><td>To pause all the stopped and running containers</td></tr><tr><td><code>docker start $(docker ps  -q)</code></td><td>To start all  running containers</td></tr><tr><td><code>docker start $(docker ps -a -q)</code></td><td>To start all the stopped and running containers</td></tr><tr><td><code>docker rm -vf $(docker ps -a -q)</code></td><td>To delete all containers including its volumes use</td></tr><tr><td><code>docker rmi -f $(docker images -a -q)</code></td><td>To delete all the images</td></tr><tr><td><code>docker system prune</code></td><td>To delete all dangling and unused images, containers, cache and volumes</td></tr><tr><td><code>docker system prune -a</code></td><td>To delete all used and unused images</td></tr><tr><td><code>docker system prune --volumes</code></td><td>To delete all docker volumes</td></tr></tbody></table></div>
<p><strong>Inspect Containers:</strong></p>
<div class="table-responsive">




































<table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>docker ps</code></td><td>List running containers</td></tr><tr><td><code>docker ps -a</code></td><td>List all containers, including stopped</td></tr><tr><td><code>docker logs CONTAINER</code></td><td>Show a container output</td></tr><tr><td><code>docker logs -f CONTAINER</code></td><td>Follow a container output</td></tr><tr><td><code>docker top CONTAINER</code></td><td>List the processes running in a container</td></tr><tr><td><code>docker diff</code></td><td>Show the differences with the image (modified files)</td></tr><tr><td><code>docker inspect</code></td><td>Show information of a container (json formatted)</td></tr></tbody></table></div>
<p><strong>Run Commands:</strong></p>
<div class="table-responsive">




































<table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>docker attach CONTAINER</code></td><td>Attach to a container</td></tr><tr><td><code>docker cp CONTAINER:PATH HOSTPATH</code></td><td>Copy files from the container</td></tr><tr><td><code>docker cp HOSTPATH CONTAINER:PATH</code></td><td>Copy files into the container</td></tr><tr><td><code>docker export CONTAINER</code></td><td>Export the content of the container (tar archive)</td></tr><tr><td><code>docker exec CONTAINER</code></td><td>Run a command inside a container</td></tr><tr><td><code>docker exec -it CONTAINER /bin/bash</code></td><td>Open an interactive shell inside a container (there is no bash in some images, use /bin/sh)</td></tr><tr><td><code>docker wait CONTAINER</code></td><td>Wait until the container terminates and return the exit code</td></tr></tbody></table></div>
<p><strong>Images:</strong></p>
<div class="table-responsive">
































































<table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>docker images</code></td><td>List all local images</td></tr><tr><td><code>docker history IMAGE</code></td><td>Show the image history</td></tr><tr><td><code>docker inspect IMAGE</code></td><td>Show information (json formatted)</td></tr><tr><td><code>docker tag IMAGE TAG</code></td><td>Tag an image</td></tr><tr><td><code>docker commit CONTAINER IMAGE</code></td><td>Create an image (from a container)</td></tr><tr><td><code>docker import URL</code></td><td>Create an image (from a tarball)</td></tr><tr><td><code>docker rmi IMAGE</code></td><td>Delete images</td></tr><tr><td><code>docker pull REPO:[TAG]</code></td><td>pull an image/repo from a registry</td></tr><tr><td><code>docker push REPO:[TAG]</code></td><td>push and image/repo to a registry</td></tr><tr><td><code>docker search TEXT</code></td><td>Search an image on the official registry</td></tr><tr><td><code>docker login</code></td><td>Login to a registry</td></tr><tr><td><code>docker logout</code></td><td>Logout from a registry</td></tr><tr><td><code>docker save REPO:[TAG]</code></td><td>Export an image/repo as a tarball</td></tr><tr><td><code>docker load</code></td><td>Load images from a tarball</td></tr></tbody></table></div>
<p><strong>Volumes:</strong></p>
<div class="table-responsive">
































<table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>docker volume ls</code></td><td>List all vol1umes</td></tr><tr><td><code>docker volume create VOLUME</code></td><td>Create a volume</td></tr><tr><td><code>docker volume inspect VOLUME</code></td><td>Show information (json formatted)</td></tr><tr><td><code>docker volume rm VOLUME</code></td><td>Destroy a volume</td></tr><tr><td><code>docker volume ls --filter="dangling=true"</code></td><td>List all dangling volumes (not referenced by any container)</td></tr><tr><td><code>docker volume prune</code></td><td>Delete all volumes (not referenced by any container)</td></tr></tbody></table></div>
<h3 id="backup-a-container">Backup a container<a aria-hidden="true" class="anchor-heading icon-link" href="#backup-a-container"></a></h3>
<p>Backup docker data from inside container volumes and package it in a tarball archive.
<code>docker run --rm --volumes-from CONTAINER -v $(pwd):/backup busybox tar cvfz /backup/backup.tar CONTAINERPATH</code></p>
<h3 id="restore-container-from-backup">Restore container from backup<a aria-hidden="true" class="anchor-heading icon-link" href="#restore-container-from-backup"></a></h3>
<p>Restore the volume with a tarball archive.
<code>docker run --rm --volumes-from CONTAINER -v $(pwd):/backup busybox sh -c "cd CONTAINERPATH &#x26;&#x26; tar xvf /backup/backup.tar --strip 1"</code></p>
<h2 id="networks">Networks<a aria-hidden="true" class="anchor-heading icon-link" href="#networks"></a></h2>
<h2 id="troubleshooting">Troubleshooting<a aria-hidden="true" class="anchor-heading icon-link" href="#troubleshooting"></a></h2>
<h3 id="networking">Networking<a aria-hidden="true" class="anchor-heading icon-link" href="#networking"></a></h3>
<p><code>docker run --name netshoot --rm -it nicolaka/netshoot /bin/bash</code></p>